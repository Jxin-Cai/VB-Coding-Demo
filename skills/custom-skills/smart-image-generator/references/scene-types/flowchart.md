# 场景类型：流程图

## 用途

创建清晰、易懂的流程图，要求：
- 可视化工作流和决策树
- 显示顺序步骤和逻辑流程
- 简单传达复杂流程
- 辅助文档和解释

## 检测关键词

- "流程图"、"流程"、"过程图"
- "工作流"、"流程"、"程序"
- 顺序指示词："步骤"、"首先"、"然后"、"接下来"
- 决策语言："如果"、"否则"、"当"、"判断"
- 编号列表或有序步骤

## 提示词架构

### 必需组件

1. **流程名称**：工作流的清晰标题
2. **步骤**：流程中的各个阶段
3. **连接**：步骤间的关系（箭头、分支）
4. **决策点**：基于条件的流程分支
5. **开始/结束**：清晰的起点和终点

### 流程图类型

**线性流程**：
```
开始 → 步骤1 → 步骤2 → 步骤3 → 结束
```

**决策树**：
```
开始 → 决策点
         ├─ 是 → 操作A → 结束
         └─ 否 → 操作B → 结束
```

**循环流程**：
```
开始 → 步骤1 → 步骤2 → 判断
                             ├─ 继续 → （返回步骤1）
                             └─ 完成 → 结束
```

**并行流程**：
```
开始 → 分叉
         ├─ 分支A → 任务A1 → 任务A2
         └─ 分支B → 任务B1 → 任务B2
         → 合并 → 结束
```

## 模板结构

```markdown
场景：流程图
风格：{风格名称}
方向：{垂直/水平/层级}

流程概览：
- 名称：{工作流标题}
- 类型：{线性/决策树/循环/并行}
- 复杂度：{简单/中等/复杂}
- 步骤数：{数量}

流程图结构：

[开始]
    ↓
[步骤1：{操作}]
    ↓
[步骤2：{操作}]
    ↓
<决策：{问题}?>
    ├─ 是 →
    |   [操作A]
    |       ↓
    |   [结果A]
    |       ↓
    └─ 否 →
        [操作B]
            ↓
        [结果B]
            ↓
[合并点]
    ↓
[最终步骤]
    ↓
[结束]

节点样式：
- 开始/结束节点：
  - 形状：{椭圆/圆角矩形}
  - 颜色：{独特颜色}
  - 标签："开始" / "结束"

- 流程节点：
  - 形状：{矩形/圆角矩形}
  - 颜色：{主色}
  - 标签格式：{动词 + 宾语}

- 决策节点：
  - 形状：{菱形/六边形}
  - 颜色：{强调色}
  - 标签格式：{带?的问题}

- 连接线：
  - 类型：{实线箭头/虚线/曲线}
  - 标签：{是/否/条件名}
  - 流向：{箭头指示}

视觉处理：
- 手绘质感：{是/否/微妙}
- 图标集成：{最小/适度/详细}
- 配色：
  - 按流程阶段：{颜色A, 颜色B, 颜色C}
  - 按决策结果：{成功绿, 错误红, 中性灰}
  - 按角色：{用户蓝, 系统紫, 外部橙}

布局与构图：
- 主方向：{从上到下/从左到右}
- 间距：{紧凑/平衡/宽松}
- 对齐：{居中/左对齐/网格}
- 背景：{纯色/网格/微妙纹理}

标签与文本：
- 字体风格：{简洁无衬线/手写/技术}
- 大小层级：{标题 > 节点标签 > 连接标签}
- 可读性：{确保所有文本清晰}

风格特定说明：
{任何风格特定的指示}
```

## 最佳实践

### 应该做的

- ✅ 使用标准流程图符号（矩形、菱形、椭圆）
- ✅ 保持文本简洁（动词 + 宾语）
- ✅ 确保流向清晰（箭头）
- ✅ 对相似类型使用一致的节点大小
- ✅ 视觉上分组相关步骤
- ✅ 清晰标注决策分支（是/否、真/假）

### 不应该做的

- ❌ 不必要地交叉线条（使用跳转连接器）
- ❌ 使用模糊的决策问题
- ❌ 节点文本过多
- ❌ 忘记开始/结束节点
- ❌ 混合不同的符号约定
- ❌ 创建混乱、难以跟随的流程

## 示例

### 示例 1：用户注册流程

**输入**："新用户注册时，验证邮箱。如果有效，创建账户并发送欢迎邮件。如果无效，显示错误并提示重新输入。"

**提示词**：
```
场景：流程图
风格：obsidian
方向：垂直

流程：用户注册流程

结构：

[开始：用户注册]
    ↓
[接收邮箱输入]
    ↓
<邮箱有效?>
    ├─ 否 →
    |   [显示错误消息]
    |       ↓
    |   [提示重新输入]
    |       ↓
    |   (循环回到接收输入)
    |
    └─ 是 →
        [创建账户]
            ↓
        [生成欢迎邮件]
            ↓
        [发送给用户]
            ↓
        [结束：注册完成]

节点样式：
- 开始/结束：圆角椭圆，浅蓝
- 流程：矩形，深灰轮廓
- 决策：菱形，橙色高亮
- 错误路径：红色虚线

视觉：手绘质感，简洁极简
背景：微妙点阵网格
```

### 示例 2：软件部署管道

**输入**："构建代码 → 运行测试 → 如果测试通过，部署到预发布 → 人工审批 → 部署到生产。如果测试失败，通知团队。"

**提示词**：
```
场景：流程图
风格：blueprint（蓝图）
方向：水平

流程：CI/CD 部署管道

结构：

[开始] → [构建代码] → [运行测试]
                              ↓
                      <测试通过?>
                         ↙         ↘
                    否              是
                    ↓                ↓
            [通知团队]    [部署到预发布]
                    ↓                ↓
                  [结束]      <人工审批?>
                                   ↙         ↘
                              否              是
                              ↓                ↓
                      [回滚]    [部署到生产]
                              ↓                ↓
                            [结束]            [结束]

节点样式：
- 构建/部署：矩形，蓝色技术风
- 测试/审批：菱形，橙色
- 通知/回滚：矩形，红色轮廓

视觉：技术图纸风格
- 蓝图网格背景
- 工程标注风格
- 精确对齐
```

### 示例 3：客服工单路由

**输入**："客户提交工单 → 检查优先级 → 高优先级进入升级团队。普通优先级：检查是技术问题还是账单问题 → 路由到相应部门。"

**提示词**：
```
场景：流程图
风格：notion
方向：垂直

流程：客服工单路由

结构：

[开始：工单提交]
    ↓
[分析工单]
    ↓
<优先级?>
    ├─ 高 →
    |   [升级团队]
    |       ↓
    |   [高级客服]
    |
    └─ 普通 →
        <问题类型?>
            ├─ 技术 →
            |   [技术支持]
            |
            └─ 账单 →
                [账单部门]

所有路径汇合：
    ↓
[分配客服]
    ↓
[开始解决]
    ↓
[结束]

节点样式：
- 工单/客服：圆角矩形，柔和蓝
- 决策：菱形，紫色
- 部门：矩形，按颜色编码
  - 升级：红色
  - 技术支持：蓝色
  - 账单：绿色

视觉：简洁 SaaS 风格，现代极简
背景：浅色渐变
```

## 故障排除

### 步骤顺序不清

**问题**：步骤顺序不明确，或并行流程

**解决方案**：
1. 请用户澄清主路径
2. 识别是真正并行还是只是选项
3. 如果需要使用编号子步骤
4. 考虑为复杂流程创建多个图表

### 决策点过多

**问题**：流程图变成复杂网络

**解决方案**：
1. 分组相似决策
2. 为分支创建子流程图
3. 使用"跳转到"连接器避免线条交叉
4. 通过抽象一些决策来简化

### 循环逻辑

**问题**：流程中的循环或迭代

**解决方案**：
1. 清晰标记循环返回箭头
2. 如果适用添加循环条件/计数器
3. 如果相关考虑显示"最大迭代次数"
4. 确保退出条件清晰

## 场景特定的协作问题

在与用户讨论流程图提示词时，询问：

1. **流程清晰度**：
   - "应该显示每个微步骤还是保持高层次？"
   - "有没有应该明确的隐藏决策点？"

2. **视觉风格**：
   - "应该看起来技术化还是更手绘/随意？"
   - "需要强调某些路径（错误处理、正常路径）吗？"

3. **复杂度管理**：
   - "可以拆分成多个流程图吗？"
   - "应该将某些部分抽象成'黑盒'吗？"

4. **受众**：
   - "这是给技术人员还是普通受众看的？"
   - "可以假设多少领域知识？"
