import{r as j,m as Tt,_ as at,y as W,K as It,c as $,o as u,i as D,b as n,t as x,F as et,v as st,L as lt,d as z,M as ct,j as L,a as _,w,f as F,N as Rt,O as Ot,P as gt,h as U,Q as Gt,R as Zt,S as Ht,T as Kt,U as Jt,V as Qt,x as Xt,u as Yt,z as te,n as ee,W as At,X as ae,s as ne,Y as se,E as X,l as oe,J as re,Z as ie}from"./index-Gyt2orIW.js";import{a as pt}from"./index-Bh12ySJS.js";function le(){const a=j("story-review"),s=j(!1);return{currentScene:a,isTransitioning:s,switchToVoting:()=>{s.value||a.value==="voting"||(s.value=!0,setTimeout(()=>{a.value="voting",s.value=!1},800))},switchToStoryReview:()=>{s.value||a.value==="story-review"||(s.value=!0,setTimeout(()=>{a.value="story-review",s.value=!1},800))}}}var $t={};(function a(s,d,P,m){var p=!!(s.Worker&&s.Blob&&s.Promise&&s.OffscreenCanvas&&s.OffscreenCanvasRenderingContext2D&&s.HTMLCanvasElement&&s.HTMLCanvasElement.prototype.transferControlToOffscreen&&s.URL&&s.URL.createObjectURL),i=typeof Path2D=="function"&&typeof DOMMatrix=="function",l=function(){if(!s.OffscreenCanvas)return!1;try{var e=new OffscreenCanvas(1,1),t=e.getContext("2d");t.fillRect(0,0,1,1);var o=e.transferToImageBitmap();t.createPattern(o,"no-repeat")}catch{return!1}return!0}();function c(){}function r(e){var t=d.exports.Promise,o=t!==void 0?t:s.Promise;return typeof o=="function"?new o(e):(e(c,c),null)}var y=function(e,t){return{transform:function(o){if(e)return o;if(t.has(o))return t.get(o);var f=new OffscreenCanvas(o.width,o.height),b=f.getContext("2d");return b.drawImage(o,0,0),t.set(o,f),f},clear:function(){t.clear()}}}(l,new Map),O=function(){var e=Math.floor(16.666666666666668),t,o,f={},b=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(t=function(C){var M=Math.random();return f[M]=requestAnimationFrame(function v(k){b===k||b+e-1<k?(b=k,delete f[M],C()):f[M]=requestAnimationFrame(v)}),M},o=function(C){f[C]&&cancelAnimationFrame(f[C])}):(t=function(C){return setTimeout(C,e)},o=function(C){return clearTimeout(C)}),{frame:t,cancel:o}}(),h=function(){var e,t,o={};function f(b){function C(M,v){b.postMessage({options:M||{},callback:v})}b.init=function(v){var k=v.transferControlToOffscreen();b.postMessage({canvas:k},[k])},b.fire=function(v,k,E){if(t)return C(v,null),t;var I=Math.random().toString(36).slice(2);return t=r(function(N){function R(B){B.data.callback===I&&(delete o[I],b.removeEventListener("message",R),t=null,y.clear(),E(),N())}b.addEventListener("message",R),C(v,I),o[I]=R.bind(null,{data:{callback:I}})}),t},b.reset=function(){b.postMessage({reset:!0});for(var v in o)o[v](),delete o[v]}}return function(){if(e)return e;if(!P&&p){var b=["var CONFETTI, SIZE = {}, module = {};","("+a.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{e=new Worker(URL.createObjectURL(new Blob([b])))}catch(C){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",C),null}f(e)}return e}}(),G={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function K(e,t){return t?t(e):e}function T(e){return e!=null}function A(e,t,o){return K(e&&T(e[t])?e[t]:G[t],o)}function ot(e){return e<0?0:Math.floor(e)}function ut(e,t){return Math.floor(Math.random()*(t-e))+e}function Y(e){return parseInt(e,16)}function dt(e){return e.map(bt)}function bt(e){var t=String(e).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:Y(t.substring(0,2)),g:Y(t.substring(2,4)),b:Y(t.substring(4,6))}}function Ct(e){var t=A(e,"origin",Object);return t.x=A(t,"x",Number),t.y=A(t,"y",Number),t}function _t(e){e.width=document.documentElement.clientWidth,e.height=document.documentElement.clientHeight}function vt(e){var t=e.getBoundingClientRect();e.width=t.width,e.height=t.height}function wt(e){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=e,t}function Mt(e,t,o,f,b,C,M,v,k){e.save(),e.translate(t,o),e.rotate(C),e.scale(f,b),e.arc(0,0,1,M,v,k),e.restore()}function rt(e){var t=e.angle*(Math.PI/180),o=e.spread*(Math.PI/180);return{x:e.x,y:e.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:e.startVelocity*.5+Math.random()*e.startVelocity,angle2D:-t+(.5*o-Math.random()*o),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:e.color,shape:e.shape,tick:0,totalTicks:e.ticks,decay:e.decay,drift:e.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:e.gravity*3,ovalScalar:.6,scalar:e.scalar,flat:e.flat}}function ft(e,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.velocity*=t.decay,t.flat?(t.wobble=0,t.wobbleX=t.x+10*t.scalar,t.wobbleY=t.y+10*t.scalar,t.tiltSin=0,t.tiltCos=0,t.random=1):(t.wobble+=t.wobbleSpeed,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble),t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2);var o=t.tick++/t.totalTicks,f=t.x+t.random*t.tiltCos,b=t.y+t.random*t.tiltSin,C=t.wobbleX+t.random*t.tiltCos,M=t.wobbleY+t.random*t.tiltSin;if(e.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-o)+")",e.beginPath(),i&&t.shape.type==="path"&&typeof t.shape.path=="string"&&Array.isArray(t.shape.matrix))e.fill(ht(t.shape.path,t.shape.matrix,t.x,t.y,Math.abs(C-f)*.1,Math.abs(M-b)*.1,Math.PI/10*t.wobble));else if(t.shape.type==="bitmap"){var v=Math.PI/10*t.wobble,k=Math.abs(C-f)*.1,E=Math.abs(M-b)*.1,I=t.shape.bitmap.width*t.scalar,N=t.shape.bitmap.height*t.scalar,R=new DOMMatrix([Math.cos(v)*k,Math.sin(v)*k,-Math.sin(v)*E,Math.cos(v)*E,t.x,t.y]);R.multiplySelf(new DOMMatrix(t.shape.matrix));var B=e.createPattern(y.transform(t.shape.bitmap),"no-repeat");B.setTransform(R),e.globalAlpha=1-o,e.fillStyle=B,e.fillRect(t.x-I/2,t.y-N/2,I,N),e.globalAlpha=1}else if(t.shape==="circle")e.ellipse?e.ellipse(t.x,t.y,Math.abs(C-f)*t.ovalScalar,Math.abs(M-b)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):Mt(e,t.x,t.y,Math.abs(C-f)*t.ovalScalar,Math.abs(M-b)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI);else if(t.shape==="star")for(var V=Math.PI/2*3,q=4*t.scalar,Z=8*t.scalar,H=t.x,Q=t.y,nt=5,J=Math.PI/nt;nt--;)H=t.x+Math.cos(V)*Z,Q=t.y+Math.sin(V)*Z,e.lineTo(H,Q),V+=J,H=t.x+Math.cos(V)*q,Q=t.y+Math.sin(V)*q,e.lineTo(H,Q),V+=J;else e.moveTo(Math.floor(t.x),Math.floor(t.y)),e.lineTo(Math.floor(t.wobbleX),Math.floor(b)),e.lineTo(Math.floor(C),Math.floor(M)),e.lineTo(Math.floor(f),Math.floor(t.wobbleY));return e.closePath(),e.fill(),t.tick<t.totalTicks}function mt(e,t,o,f,b){var C=t.slice(),M=e.getContext("2d"),v,k,E=r(function(I){function N(){v=k=null,M.clearRect(0,0,f.width,f.height),y.clear(),b(),I()}function R(){P&&!(f.width===m.width&&f.height===m.height)&&(f.width=e.width=m.width,f.height=e.height=m.height),!f.width&&!f.height&&(o(e),f.width=e.width,f.height=e.height),M.clearRect(0,0,f.width,f.height),C=C.filter(function(B){return ft(M,B)}),C.length?v=O.frame(R):N()}v=O.frame(R),k=N});return{addFettis:function(I){return C=C.concat(I),E},canvas:e,promise:E,reset:function(){v&&O.cancel(v),k&&k()}}}function yt(e,t){var o=!e,f=!!A(t||{},"resize"),b=!1,C=A(t,"disableForReducedMotion",Boolean),M=p&&!!A(t||{},"useWorker"),v=M?h():null,k=o?_t:vt,E=e&&v?!!e.__confetti_initialized:!1,I=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,N;function R(V,q,Z){for(var H=A(V,"particleCount",ot),Q=A(V,"angle",Number),nt=A(V,"spread",Number),J=A(V,"startVelocity",Number),Lt=A(V,"decay",Number),Bt=A(V,"gravity",Number),Ut=A(V,"drift",Number),Vt=A(V,"colors",dt),Dt=A(V,"ticks",Number),xt=A(V,"shapes"),zt=A(V,"scalar"),jt=!!A(V,"flat"),Et=Ct(V),Nt=H,Pt=[],qt=e.width*Et.x,Wt=e.height*Et.y;Nt--;)Pt.push(rt({x:qt,y:Wt,angle:Q,spread:nt,startVelocity:J,color:Vt[Nt%Vt.length],shape:xt[ut(0,xt.length)],ticks:Dt,decay:Lt,gravity:Bt,drift:Ut,scalar:zt,flat:jt}));return N?N.addFettis(Pt):(N=mt(e,Pt,k,q,Z),N.promise)}function B(V){var q=C||A(V,"disableForReducedMotion",Boolean),Z=A(V,"zIndex",Number);if(q&&I)return r(function(J){J()});o&&N?e=N.canvas:o&&!e&&(e=wt(Z),document.body.appendChild(e)),f&&!E&&k(e);var H={width:e.width,height:e.height};v&&!E&&v.init(e),E=!0,v&&(e.__confetti_initialized=!0);function Q(){if(v){var J={getBoundingClientRect:function(){if(!o)return e.getBoundingClientRect()}};k(J),v.postMessage({resize:{width:J.width,height:J.height}});return}H.width=H.height=null}function nt(){N=null,f&&(b=!1,s.removeEventListener("resize",Q)),o&&e&&(document.body.contains(e)&&document.body.removeChild(e),e=null,E=!1)}return f&&!b&&(b=!0,s.addEventListener("resize",Q,!1)),v?v.fire(V,H,nt):R(V,H,nt)}return B.reset=function(){v&&v.reset(),N&&N.reset()},B}var it;function tt(){return it||(it=yt(null,{useWorker:!0,resize:!0})),it}function ht(e,t,o,f,b,C,M){var v=new Path2D(e),k=new Path2D;k.addPath(v,new DOMMatrix(t));var E=new Path2D;return E.addPath(k,new DOMMatrix([Math.cos(M)*b,Math.sin(M)*b,-Math.sin(M)*C,Math.cos(M)*C,o,f])),E}function g(e){if(!i)throw new Error("path confetti are not supported in this browser");var t,o;typeof e=="string"?t=e:(t=e.path,o=e.matrix);var f=new Path2D(t),b=document.createElement("canvas"),C=b.getContext("2d");if(!o){for(var M=1e3,v=M,k=M,E=0,I=0,N,R,B=0;B<M;B+=2)for(var V=0;V<M;V+=2)C.isPointInPath(f,B,V,"nonzero")&&(v=Math.min(v,B),k=Math.min(k,V),E=Math.max(E,B),I=Math.max(I,V));N=E-v,R=I-k;var q=10,Z=Math.min(q/N,q/R);o=[Z,0,0,Z,-Math.round(N/2+v)*Z,-Math.round(R/2+k)*Z]}return{type:"path",path:t,matrix:o}}function S(e){var t,o=1,f="#000000",b='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof e=="string"?t=e:(t=e.text,o="scalar"in e?e.scalar:o,b="fontFamily"in e?e.fontFamily:b,f="color"in e?e.color:f);var C=10*o,M=""+C+"px "+b,v=new OffscreenCanvas(C,C),k=v.getContext("2d");k.font=M;var E=k.measureText(t),I=Math.ceil(E.actualBoundingBoxRight+E.actualBoundingBoxLeft),N=Math.ceil(E.actualBoundingBoxAscent+E.actualBoundingBoxDescent),R=2,B=E.actualBoundingBoxLeft+R,V=E.actualBoundingBoxAscent+R;I+=R+R,N+=R+R,v=new OffscreenCanvas(I,N),k=v.getContext("2d"),k.font=M,k.fillStyle=f,k.fillText(t,B,V);var q=1/o;return{type:"bitmap",bitmap:v.transferToImageBitmap(),matrix:[q,0,0,q,-I*q/2,-N*q/2]}}d.exports=function(){return tt().apply(this,arguments)},d.exports.reset=function(){tt().reset()},d.exports.create=yt,d.exports.shapeFromPath=g,d.exports.shapeFromText=S})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),$t,!1);const St=$t.exports;$t.exports.create;function ce(){const a=()=>{St({particleCount:100,spread:70,origin:{y:.6},colors:["#00ff88","#00d4ff","#ff0088"],startVelocity:45,gravity:1.2,ticks:200}),setTimeout(()=>{St({particleCount:50,angle:60,spread:55,origin:{x:0},colors:["#00ff88","#00d4ff"]})},300),setTimeout(()=>{St({particleCount:50,angle:120,spread:55,origin:{x:1},colors:["#ff0088","#00d4ff"]})},300)},s=i=>{i&&(i.style.transition="transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1)",i.style.transform="scale(1.2)",setTimeout(()=>{i.style.transform="scale(1)"},600))},d=i=>{i&&(i.classList.add("glow-sweep-active"),setTimeout(()=>{i.classList.remove("glow-sweep-active")},1e3))},P=i=>{!i||i.length===0||i.forEach((l,c)=>{setTimeout(()=>{l.classList.add("minority-highlight")},c*150)})};return{playConsensusEffect:a,playNumberPopEffect:s,playGlowSweep:d,highlightMinorityCards:P,playCardShake:i=>{!i||i.length===0||i.forEach((l,c)=>{setTimeout(()=>{l.style.animation="shake 0.3s ease-in-out",setTimeout(()=>{l.style.animation=""},300)},c*50)})},playRevealSequence:(i,l={})=>{const{statisticsPanel:c,statValues:r,minorityCards:y}=l;i?(setTimeout(()=>{a()},100),c&&setTimeout(()=>{d(c)},500),r&&r.length>0&&setTimeout(()=>{r.forEach((O,h)=>{setTimeout(()=>{s(O)},h*150)})},800)):y&&y.length>0&&setTimeout(()=>{P(y)},500)}}}function ue(){const a=j(!1),s=j(!1),d=()=>{const l=navigator.hardwareConcurrency||2,c=/Android [4-6]/i.test(navigator.userAgent);a.value=l<4||c;const r=window.matchMedia("(prefers-reduced-motion: reduce)").matches;s.value=a.value||r,s.value?document.body.classList.add("reduced-animations"):document.body.classList.remove("reduced-animations")},P=()=>a.value?30:80,m=l=>{l&&(l.style.willChange="transform, opacity",l.style.transform="translateZ(0)",l.style.backfaceVisibility="hidden")},p=l=>{l&&(l.style.willChange="auto")},i=(l,c)=>{const r=()=>{document.hidden?l==null||l():c==null||c()};return document.addEventListener("visibilitychange",r),()=>{document.removeEventListener("visibilitychange",r)}};return Tt(()=>{d()}),{isLowPerformance:a,reducedAnimations:s,detectPerformance:d,getRecommendedParticleCount:P,optimizeAnimation:m,cleanupAnimation:p,setupVisibilityListener:i}}function de(a,s=0){if(!a||a.length===0)return[];const d=new Map;a.forEach(p=>{const i=p.storyPoint;d.has(i)||d.set(i,{storyPoint:i,count:0,participants:[]});const l=d.get(i);l.count++,l.participants.push(p.participantName)});const P=a.length,m=Array.from(d.values()).map(p=>{const i=Math.round(p.count/P*100),l=Math.ceil(P*.2),c=p.count<=l&&p.count<P/2;return{...p,percentage:i,isMinority:c}});return m.sort((p,i)=>i.count-p.count),m}function ve(a){return!a||a.length===0?!1:a.length===1}function fe(a){var c;if(!a||!a.votes||a.votes.length===0)return{average:0,max:0,min:0,median:0,votedCount:0,totalCount:(a==null?void 0:a.totalParticipants)||0};const s=a.votes.map(r=>r.storyPoint).sort((r,y)=>r-y),P=s.reduce((r,y)=>r+y,0)/s.length,m=Math.max(...s),p=Math.min(...s),i=Math.floor(s.length/2),l=s.length%2===0?(s[i-1]+s[i])/2:s[i];return{average:parseFloat(P.toFixed(1)),max:m,min:p,median:parseFloat(l.toFixed(1)),votedCount:a.votes.length,totalCount:a.totalParticipants||((c=a.participants)==null?void 0:c.length)||0}}const me={class:"story-card-content"},ye={class:"story-card-header"},he={key:0,class:"fullscreen-hint"},pe={class:"story-card-body"},ge={class:"story-section"},be={class:"section-content"},Ce={key:0,class:"story-section"},_e={class:"acceptance-criteria-list"},we={key:0,class:"story-card-footer"},Me={__name:"StoryCardDisplay",props:{storyCard:{type:Object,required:!0,default:()=>({})}},setup(a){const s=a,d=j(!1),P=W(()=>s.storyCard.acceptanceCriteria?Array.isArray(s.storyCard.acceptanceCriteria)?s.storyCard.acceptanceCriteria:s.storyCard.acceptanceCriteria.split(`
`).filter(l=>l.trim()):[]),m=()=>{d.value=!d.value},p=()=>{d.value=!1},i=l=>{l.key==="Escape"&&d.value&&p()};return Tt(()=>{document.addEventListener("keydown",i)}),It(()=>{document.removeEventListener("keydown",i)}),(l,c)=>(u(),$(et,null,[d.value?(u(),$("div",{key:0,class:"story-card-backdrop",onClick:p})):D("",!0),n("div",{class:lt(["story-card-display",{fullscreen:d.value}]),onDblclick:m},[n("div",me,[n("div",ye,[n("h2",null,"ðŸ“ "+x(a.storyCard.title||"æœªå‘½åæ•…äº‹å¡"),1),d.value?(u(),$("div",he," æŒ‰ ESC é€€å‡ºå…¨å± ")):D("",!0)]),n("div",pe,[n("div",ge,[c[0]||(c[0]=n("h3",{class:"section-title"},"æè¿°",-1)),n("p",be,x(a.storyCard.description||"æš‚æ— æè¿°"),1)]),a.storyCard.acceptanceCriteria?(u(),$("div",Ce,[c[1]||(c[1]=n("h3",{class:"section-title"},"éªŒæ”¶æ ‡å‡†",-1)),n("ul",_e,[(u(!0),$(et,null,st(P.value,(r,y)=>(u(),$("li",{key:y},x(r),1))),128))])])):D("",!0)]),d.value?D("",!0):(u(),$("div",we,[...c[2]||(c[2]=[n("span",{class:"hint-text"},"ðŸ’¡ åŒå‡»å¯å…¨å±æŸ¥çœ‹",-1)])]))])],34)],64))}},Pe=at(Me,[["__scopeId","data-v-f475958b"]]),Se={class:"participants-sidebar"},ke={class:"sidebar-header"},Te={class:"participant-count"},$e={class:"participants-list"},Ve={class:"participant-avatar"},xe={class:"participant-info"},Ee={class:"participant-name"},Ne={class:"participant-status"},Ae={key:0,class:"empty-state"},Ie={__name:"ParticipantsSidebar",props:{participants:{type:Array,default:()=>[]},onlineUsers:{type:Array,default:()=>[]}},setup(a){const s=a,d=m=>m?m.charAt(0).toUpperCase():"?",P=m=>s.onlineUsers.length===0?!0:s.onlineUsers.includes(m);return(m,p)=>{const i=z("el-icon");return u(),$("div",Se,[n("div",ke,[p[0]||(p[0]=n("h3",null,"ðŸ‘¥ å‚ä¸Žè€…",-1)),n("span",Te,x(a.participants.length)+" äºº",1)]),n("div",$e,[(u(!0),$(et,null,st(a.participants,(l,c)=>(u(),$("div",{key:l.participantName,class:"participant-item",style:ct({animationDelay:`${c*100}ms`})},[n("div",Ve,[L(x(d(l.participantName))+" ",1),n("span",{class:lt(["online-indicator",{online:P(l.participantName)}])},null,2)]),n("div",xe,[n("span",Ee,x(l.participantName),1),n("span",Ne,x(P(l.participantName)?"åœ¨çº¿":"ç¦»çº¿"),1)])],4))),128)),a.participants.length===0?(u(),$("div",Ae,[_(i,{size:40,style:{color:"var(--color-text-tertiary)"}},{default:w(()=>[_(F(Rt))]),_:1}),p[1]||(p[1]=n("p",null,"æš‚æ— å‚ä¸Žè€…",-1))])):D("",!0)])])}}},Re=at(Ie,[["__scopeId","data-v-1c7b75a5"]]),Oe={class:"story-review-scene",role:"tabpanel","aria-label":"æ•…äº‹å¡è®²è§£åœºæ™¯"},Fe={class:"scene-layout"},Le={class:"story-card-section"},Be={class:"participants-section"},Ue={class:"action-section"},De={__name:"StoryReviewScene",props:{storyCard:{type:Object,required:!0,default:()=>({})},participants:{type:Array,default:()=>[]},onlineUsers:{type:Array,default:()=>[]}},emits:["startVoting"],setup(a,{emit:s}){const d=s,P=()=>{d("startVoting")};return(m,p)=>{const i=z("el-icon"),l=z("el-button");return u(),$("div",Oe,[n("div",Fe,[n("div",Le,[_(Pe,{storyCard:a.storyCard},null,8,["storyCard"])]),n("div",Be,[_(Re,{participants:a.participants,onlineUsers:a.onlineUsers},null,8,["participants","onlineUsers"])])]),n("div",Ue,[_(l,{class:"start-voting-button",type:"primary",size:"large",onClick:P,"aria-label":"å¼€å§‹ä¼°ç‚¹ä¼šè¯"},{default:w(()=>[_(i,null,{default:w(()=>[_(F(Ot))]),_:1}),p[0]||(p[0]=L(" å¼€å§‹ä¼°ç‚¹ ",-1))]),_:1})])])}}},ze=at(De,[["__scopeId","data-v-53186964"]]);function je(a,s,d,P,m=Ft){const p=Date.now(),i=s-a;function l(){const r=Date.now()-p,y=Math.min(r/d,1),O=m(y),h=a+i*O;P(h),y<1?requestAnimationFrame(l):P(s)}requestAnimationFrame(l)}function Ft(a){return 1-Math.pow(1-a,3)}function kt(a,s={}){const{duration:d=800,decimals:P=0,easing:m=Ft}=s,p=j(0),i=j(!1);return gt(a,(l,c)=>{if(l===c||l===null||l===void 0)return;const r=c||0,y=l;i.value=!0,je(r,y,d,O=>{p.value=P>0?O.toFixed(P):Math.round(O)},m),setTimeout(()=>{i.value=!1},d)},{immediate:!0}),{displayValue:p,isAnimating:i}}const qe={class:"vote-distribution-chart"},We={key:0,class:"chart-container"},Ge={class:"point-label"},Ze={class:"bar-container"},He={class:"count-label"},Ke={class:"count"},Je={class:"percentage"},Qe={key:1,class:"empty-state"},Xe={key:2,class:"minority-hint"},Ye={__name:"VoteDistributionChart",props:{distribution:{type:Array,default:()=>[]}},setup(a){const s=a,d=W(()=>s.distribution.some(P=>P.isMinority));return(P,m)=>{const p=z("el-icon");return u(),$("div",qe,[a.distribution&&a.distribution.length>0?(u(),$("div",We,[(u(!0),$(et,null,st(a.distribution,(i,l)=>(u(),$("div",{key:i.storyPoint,class:lt(["chart-item",{minority:i.isMinority}]),style:ct({animationDelay:`${l*100}ms`})},[n("div",Ge,x(i.storyPoint)+" ç‚¹ ",1),n("div",Ze,[n("div",{class:"bar",style:ct({width:`${i.percentage}%`})},[...m[0]||(m[0]=[n("div",{class:"bar-fill"},null,-1)])],4)]),n("div",He,[n("span",Ke,x(i.count)+" äºº",1),n("span",Je,"("+x(i.percentage)+"%)",1),i.isMinority?(u(),U(p,{key:0,class:"warning-icon"},{default:w(()=>[_(F(Gt))]),_:1})):D("",!0)])],6))),128))])):(u(),$("div",Qe,[_(p,{size:32,style:{color:"var(--color-text-tertiary)"}},{default:w(()=>[_(F(Zt))]),_:1}),m[1]||(m[1]=n("p",null,"æš‚æ— æŠ•ç¥¨æ•°æ®",-1))])),d.value?(u(),$("div",Xe,[_(p,null,{default:w(()=>[_(F(Ht))]),_:1}),m[2]||(m[2]=L(" å°‘æ•°æ„è§è€…è¯·å‘è¡¨çœ‹æ³• ",-1))])):D("",!0)])}}},ta=at(Ye,[["__scopeId","data-v-b5a56958"]]),ea={class:"statistics-panel"},aa={class:"panel-header"},na={key:0,class:"stats-grid",role:"region","aria-live":"polite","aria-label":"æŠ•ç¥¨ç»Ÿè®¡ç»“æžœ"},sa={class:"stat-item stat-average"},oa={class:"stat-value"},ra={class:"stat-item stat-max"},ia={class:"stat-value"},la={class:"stat-item stat-min"},ca={class:"stat-value"},ua={key:1,class:"distribution-section"},da={key:2,class:"voting-progress"},va={class:"progress-info"},fa={class:"progress-percentage"},ma={class:"progress-bar-container"},ya={__name:"StatisticsPanel",props:{stats:{type:Object,default:()=>({})},distribution:{type:Array,default:()=>[]},revealed:{type:Boolean,default:!1},votedCount:{type:Number,default:0},totalCount:{type:Number,default:0}},setup(a){const s=a,d=W(()=>s.stats.average||0),P=W(()=>s.stats.max||0),m=W(()=>s.stats.min||0),{displayValue:p}=kt(d,{duration:800,decimals:1}),{displayValue:i}=kt(P,{duration:600}),{displayValue:l}=kt(m,{duration:600}),c=W(()=>!s.totalCount||s.totalCount===0?0:Math.round(s.votedCount/s.totalCount*100));return(r,y)=>{const O=z("el-tag");return u(),$("div",ea,[n("div",aa,[y[1]||(y[1]=n("h3",null,"ðŸ“Š ç»Ÿè®¡ç»“æžœ",-1)),a.revealed?(u(),U(O,{key:0,type:"success",size:"small"},{default:w(()=>[...y[0]||(y[0]=[L("å·²æ­ç¤º",-1)])]),_:1})):(u(),U(O,{key:1,type:"info",size:"small"},{default:w(()=>[L(x(a.votedCount)+" / "+x(a.totalCount)+" å·²æŠ•ç¥¨ ",1)]),_:1}))]),a.revealed?(u(),$("div",na,[n("div",sa,[n("div",oa,x(F(p)||"N/A"),1),y[2]||(y[2]=n("div",{class:"stat-label"},"å¹³å‡å€¼",-1))]),n("div",ra,[n("div",ia,x(F(i)||"N/A"),1),y[3]||(y[3]=n("div",{class:"stat-label"},"æœ€å¤§å€¼",-1))]),n("div",la,[n("div",ca,x(F(l)||"N/A"),1),y[4]||(y[4]=n("div",{class:"stat-label"},"æœ€å°å€¼",-1))])])):D("",!0),a.revealed&&a.distribution&&a.distribution.length>0?(u(),$("div",ua,[y[5]||(y[5]=n("div",{class:"section-title"},"ç‚¹æ•°åˆ†å¸ƒ",-1)),_(ta,{distribution:a.distribution},null,8,["distribution"])])):D("",!0),a.revealed?D("",!0):(u(),$("div",da,[n("div",va,[y[6]||(y[6]=n("span",null,"æŠ•ç¥¨è¿›åº¦",-1)),n("span",fa,x(c.value)+"%",1)]),n("div",ma,[n("div",{class:"progress-bar",style:ct({width:`${c.value}%`})},null,4)])]))])}}},ha=at(ya,[["__scopeId","data-v-2756299a"]]),pa={class:"voting-sidebar"},ga={class:"story-card-summary"},ba={class:"summary-header"},Ca={class:"story-title"},_a={class:"participants-compact"},wa={class:"compact-header"},Ma={class:"compact-list"},Pa={class:"compact-avatar"},Sa={class:"compact-name"},ka={key:0,class:"final-point-section"},Ta={class:"section-header"},$a={__name:"VotingSidebar",props:{storyCard:{type:Object,default:()=>({})},participants:{type:Array,default:()=>[]},stats:{type:Object,default:()=>({})},distribution:{type:Array,default:()=>[]},revealed:{type:Boolean,default:!1},votedCount:{type:Number,default:0},totalCount:{type:Number,default:0},canComplete:{type:Boolean,default:!1},finalPoint:{type:Number,default:null},completing:{type:Boolean,default:!1},storyPoints:{type:Array,default:()=>[1,2,3,5,8,13]}},emits:["update:finalPoint","complete"],setup(a,{emit:s}){const d=a,P=s,m=j(d.finalPoint);gt(()=>d.finalPoint,c=>{m.value=c}),gt(m,c=>{P("update:finalPoint",c)});const p=c=>c?c.charAt(0).toUpperCase():"?",i=c=>{if(!d.distribution||d.distribution.length===0)return"info";const r=d.distribution.find(y=>y.storyPoint===c.storyPoint);return r?r.isMinority?"danger":"success":"info"},l=()=>{P("complete",m.value)};return(c,r)=>{const y=z("el-icon"),O=z("el-tag"),h=z("el-radio-button"),G=z("el-radio-group"),K=z("el-button");return u(),$("div",pa,[n("div",ga,[n("div",ba,[_(y,null,{default:w(()=>[_(F(Kt))]),_:1}),r[1]||(r[1]=n("span",null,"æ•…äº‹å¡",-1))]),n("h3",Ca,x(a.storyCard.title||"æœªå‘½å"),1)]),n("div",_a,[n("div",wa,[_(y,null,{default:w(()=>[_(F(Rt))]),_:1}),n("span",null,"å‚ä¸Žè€… ("+x(a.participants.length)+")",1)]),n("div",Ma,[(u(!0),$(et,null,st(a.participants,T=>(u(),$("div",{key:T.participantName,class:"compact-item"},[n("div",Pa,x(p(T.participantName)),1),n("span",Sa,x(T.participantName),1),a.revealed&&T.storyPoint?(u(),U(O,{key:0,type:i(T),size:"small"},{default:w(()=>[L(x(T.storyPoint)+" ç‚¹ ",1)]),_:2},1032,["type"])):T.hasVoted?(u(),U(O,{key:1,type:"success",size:"small"},{default:w(()=>[...r[2]||(r[2]=[L(" âœ“ ",-1)])]),_:1})):(u(),U(O,{key:2,type:"info",size:"small"},{default:w(()=>[...r[3]||(r[3]=[L(" ... ",-1)])]),_:1}))]))),128))])]),_(ha,{stats:a.stats,distribution:a.distribution,revealed:a.revealed,votedCount:a.votedCount,totalCount:a.totalCount},null,8,["stats","distribution","revealed","votedCount","totalCount"]),a.revealed&&a.canComplete?(u(),$("div",ka,[n("div",Ta,[_(y,null,{default:w(()=>[_(F(Jt))]),_:1}),r[4]||(r[4]=n("span",null,"æœ€ç»ˆç‚¹æ•°",-1))]),_(G,{modelValue:m.value,"onUpdate:modelValue":r[0]||(r[0]=T=>m.value=T),size:"large",style:{width:"100%"}},{default:w(()=>[(u(!0),$(et,null,st(a.storyPoints,T=>(u(),U(h,{key:T,label:T,style:{flex:"1"}},{default:w(()=>[L(x(T),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"]),_(K,{type:"success",size:"large",style:{width:"100%","margin-top":"12px"},onClick:l,disabled:!m.value,loading:a.completing},{default:w(()=>[...r[5]||(r[5]=[L(" å®Œæˆä¼°ç‚¹ ",-1)])]),_:1},8,["disabled","loading"])])):D("",!0)])}}},Va=at($a,[["__scopeId","data-v-e5c96749"]]),xa={class:"voting-scene",role:"tabpanel","aria-label":"ä¼°ç‚¹åœºæ™¯"},Ea={class:"scene-layout"},Na={class:"voting-center"},Aa={class:"card-header"},Ia={class:"point-cards"},Ra=["onClick"],Oa={class:"point-value"},Fa={class:"card-header"},La={class:"pool-cards"},Ba={class:"card-inner"},Ua={class:"card-back"},Da={class:"participant-name"},za={key:0,class:"vote-status voted"},ja={key:1,class:"vote-status waiting"},qa={class:"card-front"},Wa={class:"participant-name"},Ga={class:"vote-value"},Za={class:"sidebar-section"},Ha={__name:"VotingScene",props:{storyCard:{type:Object,default:()=>({})},participants:{type:Array,default:()=>[]},myVote:{type:Object,default:null},selectedPoint:{type:Number,default:null},stats:{type:Object,default:()=>({})},distribution:{type:Array,default:()=>[]},revealed:{type:Boolean,default:!1},votedCount:{type:Number,default:0},totalCount:{type:Number,default:0},justVotedUsers:{type:Set,default:()=>new Set},submitting:{type:Boolean,default:!1},sessionStatus:{type:String,default:"IN_PROGRESS"},canComplete:{type:Boolean,default:!1},finalPoint:{type:Number,default:null},completing:{type:Boolean,default:!1},storyPoints:{type:Array,default:()=>[1,2,3,5,8,13]}},emits:["selectPoint","submitVote","update:finalPoint","complete"],setup(a,{emit:s}){const d=a,P=s,m=c=>{P("selectPoint",c)},p=()=>{P("submitVote")},i=c=>d.justVotedUsers.has(c),l=c=>{if(!d.revealed||!d.distribution)return!1;const r=d.distribution.find(y=>y.storyPoint===c);return(r==null?void 0:r.isMinority)||!1};return(c,r)=>{const y=z("el-tag"),O=z("el-button"),h=z("el-card"),G=z("el-icon"),K=z("el-empty");return u(),$("div",xa,[n("div",Ea,[n("div",Na,[_(h,{class:"vote-selection-card"},{header:w(()=>[n("div",Aa,[r[2]||(r[2]=n("span",null,"ðŸŽ¯ é€‰æ‹©æ•…äº‹ç‚¹æ•°",-1)),a.myVote?(u(),U(y,{key:0,type:"success"},{default:w(()=>[L(" å·²æŠ•ç¥¨: "+x(a.myVote.storyPoint)+" ç‚¹ ",1)]),_:1})):a.selectedPoint?(u(),U(y,{key:1,type:"warning"},{default:w(()=>[L(" å·²é€‰æ‹©: "+x(a.selectedPoint)+" ç‚¹ (å¾…ç¡®è®¤) ",1)]),_:1})):D("",!0)])]),default:w(()=>[n("div",Ia,[(u(!0),$(et,null,st(a.storyPoints,T=>(u(),$("div",{key:T,class:lt(["point-card",{selected:a.selectedPoint===T||a.myVote&&!a.selectedPoint&&a.myVote.storyPoint===T,disabled:a.sessionStatus==="COMPLETED"}]),onClick:A=>m(T)},[n("div",Oa,x(T),1),r[3]||(r[3]=n("div",{class:"point-label"},"ç‚¹",-1))],10,Ra))),128))]),a.selectedPoint&&a.sessionStatus!=="COMPLETED"?(u(),U(O,{key:0,type:"primary",size:"large",style:{width:"100%","margin-top":"20px"},onClick:p,loading:a.submitting},{default:w(()=>[L(x(a.submitting?"æäº¤ä¸­...":a.myVote?"ä¿®æ”¹æŠ•ç¥¨":"ç¡®è®¤æŠ•ç¥¨"),1)]),_:1},8,["loading"])):D("",!0)]),_:1}),_(h,{class:"vote-pool-card"},{header:w(()=>[n("div",Fa,[r[5]||(r[5]=n("span",null,"ðŸŽ´ æŠ•ç¥¨æ±  (Vote Pool)",-1)),a.revealed?(u(),U(y,{key:1,type:"success",size:"small"},{default:w(()=>[...r[4]||(r[4]=[L(" å·²æ­ç¤º ",-1)])]),_:1})):(u(),U(y,{key:0,type:"info",size:"small"},{default:w(()=>[L(x(a.votedCount)+" / "+x(a.totalCount)+" å·²æŠ•ç¥¨ ",1)]),_:1}))])]),default:w(()=>[n("div",La,[(u(!0),$(et,null,st(a.participants,(T,A)=>(u(),$("div",{key:T.participantName,class:lt(["vote-card",{flipped:a.revealed&&T.hasVoted,"just-voted":i(T.participantName),minority:l(T.storyPoint)}]),style:ct({animationDelay:a.revealed?`${A*.15}s`:"0s"})},[n("div",Ba,[n("div",Ua,[n("div",Da,x(T.participantName),1),T.hasVoted?(u(),$("div",za,[_(G,{size:32},{default:w(()=>[_(F(Qt))]),_:1}),r[6]||(r[6]=n("span",null,"å·²æŠ•ç¥¨",-1))])):(u(),$("div",ja,[_(G,{size:32},{default:w(()=>[_(F(Xt))]),_:1}),r[7]||(r[7]=n("span",null,"ç­‰å¾…ä¸­...",-1))]))]),n("div",qa,[n("div",Wa,x(T.participantName),1),n("div",Ga,x(T.storyPoint||"?"),1),r[8]||(r[8]=n("div",{class:"vote-label"},"ç‚¹",-1))])])],6))),128)),a.participants.length===0?(u(),U(K,{key:0,description:"æš‚æ— å‚ä¸Žè€…","image-size":80})):D("",!0)])]),_:1})]),n("div",Za,[_(Va,{storyCard:a.storyCard,participants:a.participants,stats:a.stats,distribution:a.distribution,revealed:a.revealed,votedCount:a.votedCount,totalCount:a.totalCount,canComplete:a.canComplete,finalPoint:a.finalPoint,completing:a.completing,storyPoints:a.storyPoints,"onUpdate:finalPoint":r[0]||(r[0]=T=>c.$emit("update:finalPoint",T)),onComplete:r[1]||(r[1]=T=>c.$emit("complete",T))},null,8,["storyCard","participants","stats","distribution","revealed","votedCount","totalCount","canComplete","finalPoint","completing","storyPoints"])])])])}}},Ka=at(Ha,[["__scopeId","data-v-64b13c28"]]),Ja={class:"voting-container"},Qa={class:"header-content"},Xa={key:0,class:"subtitle"},Ya={class:"header-actions"},tn={class:"voting-content"},en={key:"status",class:"status-display"},an={__name:"Voting",setup(a){const s=te(),d=oe(),P=Yt(),{currentScene:m,switchToVoting:p,switchToStoryReview:i}=le(),{playRevealSequence:l}=ce();ue();const c=j(!1),r=j(!1),y=j(!1),O=j(!1),h=j(null),G=j(null),K=j(null),T=j(new Set),A=[1,2,3,5,8,13];let ot=null;const ut=j(!1),Y=W(()=>s.params.storyCardId),dt=W(()=>{var g;return(g=h.value)!=null&&g.votes?h.value.votes.find(S=>{var e;return S.participantName===((e=P.currentUser)==null?void 0:e.name)}):null}),bt=W(()=>{var g;return((g=h.value)==null?void 0:g.votes)&&h.value.votes.length>0}),Ct=W(()=>{if(!h.value)return[];const g=h.value.participants||[],S=h.value.votes||[];return g.map(e=>{const t=S.find(o=>o.participantName===e);return{participantName:e,storyPoint:(t==null?void 0:t.storyPoint)||null,hasVoted:!!t}})}),_t=W(()=>h.value?(h.value.participants||[]).map(g=>({participantName:g,hasVoted:!1,storyPoint:null})):[]),vt=W(()=>{var g;return!((g=h.value)!=null&&g.votes)||!h.value.revealedAt?[]:de(h.value.votes,h.value.totalParticipants)}),wt=W(()=>h.value?fe(h.value):{}),Mt=W(()=>ve(vt.value)),rt=async()=>{var g,S;try{const e=await pt.getVotingSession(Y.value);if(h.value=e.data,h.value.revealedAt&&h.value.averageStoryPoint&&!K.value){const t=h.value.averageStoryPoint,o=A.reduce((f,b)=>Math.abs(b-t)<Math.abs(f-t)?b:f);K.value=o}}catch(e){console.error("åŠ è½½ä¼šè¯å¤±è´¥:",e),X.error(((S=(g=e.response)==null?void 0:g.data)==null?void 0:S.message)||"åŠ è½½å¤±è´¥")}},ft=g=>{var S,e;((S=h.value)==null?void 0:S.status)!=="COMPLETED"&&((e=h.value)==null?void 0:e.status)!=="CANCELLED"&&(G.value=g)},mt=async()=>{var g,S,e;if(!G.value){X.warning("è¯·å…ˆé€‰æ‹©ç‚¹æ•°");return}r.value=!0;try{await pt.submitVote(Y.value,G.value);const t=dt.value!==null;X.success(t?"æŠ•ç¥¨å·²ä¿®æ”¹":"æŠ•ç¥¨æˆåŠŸ");const o=(g=P.currentUser)==null?void 0:g.name;o&&(T.value.add(o),setTimeout(()=>{T.value.delete(o)},2e3)),G.value=null,await rt()}catch(t){console.error("æŠ•ç¥¨å¤±è´¥:",t),X.error(((e=(S=t.response)==null?void 0:S.data)==null?void 0:e.message)||"æŠ•ç¥¨å¤±è´¥")}finally{r.value=!1}},yt=async()=>{var g,S;try{await re.confirm("ç¡®å®šè¦å–æ¶ˆå½“å‰ä¼°ç‚¹ä¼šè¯å—ï¼Ÿ","ç¡®è®¤å–æ¶ˆ",{confirmButtonText:"ç¡®å®šå–æ¶ˆ",cancelButtonText:"ç»§ç»­ä¼°ç‚¹",type:"warning"}),O.value=!0,await pt.cancelSession(Y.value),X.success("å·²å–æ¶ˆä¼°ç‚¹ä¼šè¯"),setTimeout(()=>{tt()},1e3)}catch(e){e!=="cancel"&&(console.error("å–æ¶ˆä¼šè¯å¤±è´¥:",e),X.error(((S=(g=e.response)==null?void 0:g.data)==null?void 0:S.message)||"å–æ¶ˆä¼šè¯å¤±è´¥"))}finally{O.value=!1}},it=async g=>{var S,e;if(!g){X.warning("è¯·é€‰æ‹©æœ€ç»ˆç‚¹æ•°");return}y.value=!0;try{await pt.completeSession(Y.value,g),X.success("ä¼°ç‚¹ä¼šè¯å·²å®Œæˆ"),setTimeout(()=>{tt()},1500)}catch(t){console.error("å®Œæˆä¼šè¯å¤±è´¥:",t),X.error(((e=(S=t.response)==null?void 0:S.data)==null?void 0:e.message)||"å®Œæˆä¼šè¯å¤±è´¥")}finally{y.value=!1}},tt=()=>{const g=s.query.poolId;g?d.push({path:"/backlog",query:{poolId:g}}):d.push("/backlog")};gt(()=>{var g;return(g=h.value)==null?void 0:g.revealedAt},async(g,S)=>{g&&!S&&!ut.value&&(ut.value=!0,await ie(),setTimeout(()=>{const e=document.querySelector(".statistics-panel"),t=document.querySelectorAll(".stat-value"),o=document.querySelectorAll(".vote-card.minority");l(Mt.value,{statisticsPanel:e,statValues:Array.from(t),minorityCards:Array.from(o)})},1200))},{immediate:!0});const ht=g=>{var S,e,t;if((g.key==="v"||g.key==="V")&&m.value==="story-review"&&((S=h.value)==null?void 0:S.status)==="IN_PROGRESS"&&p(),(g.key==="s"||g.key==="S")&&m.value==="voting"&&((e=h.value)==null?void 0:e.status)==="IN_PROGRESS"&&i(),m.value==="voting"&&((t=h.value)==null?void 0:t.status)==="IN_PROGRESS"){const o={1:1,2:2,3:3,5:5,8:8,6:13};o[g.key]&&ft(o[g.key]),g.key==="Enter"&&G.value&&mt()}};return Tt(async()=>{c.value=!0,await rt(),c.value=!1,ot=setInterval(rt,3e3),document.addEventListener("keydown",ht)}),It(()=>{ot&&clearInterval(ot),document.removeEventListener("keydown",ht)}),(g,S)=>{const e=z("el-icon"),t=z("el-button"),o=z("el-card"),f=z("el-result"),b=ne("loading");return u(),$("div",Ja,[_(o,{class:"page-header",shadow:"never"},{default:w(()=>{var C,M,v;return[n("div",Qa,[n("div",null,[n("h2",null,[_(e,null,{default:w(()=>[_(F(Ot))]),_:1}),S[1]||(S[1]=L(" ä¼°ç‚¹ä¼šè¯",-1))]),h.value?(u(),$("p",Xa,x((C=h.value.storyCard)==null?void 0:C.title),1)):D("",!0)]),n("div",Ya,[F(m)==="voting"&&((M=h.value)==null?void 0:M.status)==="IN_PROGRESS"?(u(),U(t,{key:0,onClick:F(i),"aria-label":"è¿”å›žæ•…äº‹å¡è®²è§£"},{default:w(()=>[_(e,null,{default:w(()=>[_(F(At))]),_:1}),S[2]||(S[2]=L(" è¿”å›žè®²è§£ ",-1))]),_:1},8,["onClick"])):D("",!0),((v=h.value)==null?void 0:v.status)==="IN_PROGRESS"?(u(),U(t,{key:1,type:"warning",onClick:yt,loading:O.value,"aria-label":"å–æ¶ˆä¼°ç‚¹ä¼šè¯"},{default:w(()=>[_(e,null,{default:w(()=>[_(F(ae))]),_:1}),S[3]||(S[3]=L(" å–æ¶ˆä¼°ç‚¹ ",-1))]),_:1},8,["loading"])):D("",!0),_(t,{onClick:tt,"aria-label":"è¿”å›žéœ€æ±‚æ± "},{default:w(()=>[_(e,null,{default:w(()=>[_(F(At))]),_:1}),S[4]||(S[4]=L(" è¿”å›žéœ€æ±‚æ±  ",-1))]),_:1})])])]}),_:1}),ee((u(),$("div",tn,[_(se,{name:"scene-flip",mode:"out-in"},{default:w(()=>{var C,M,v,k,E,I,N,R,B,V;return[F(m)==="story-review"&&((C=h.value)==null?void 0:C.status)==="IN_PROGRESS"?(u(),U(ze,{key:"story-review",storyCard:((M=h.value)==null?void 0:M.storyCard)||{},participants:_t.value,onlineUsers:[],onStartVoting:F(p)},null,8,["storyCard","participants","onStartVoting"])):F(m)==="voting"&&((v=h.value)==null?void 0:v.status)==="IN_PROGRESS"?(u(),U(Ka,{key:"voting",storyCard:((k=h.value)==null?void 0:k.storyCard)||{},participants:Ct.value,myVote:dt.value,selectedPoint:G.value,stats:wt.value,distribution:vt.value,revealed:!!((E=h.value)!=null&&E.revealedAt),votedCount:((I=h.value)==null?void 0:I.totalVotes)||0,totalCount:((N=h.value)==null?void 0:N.totalParticipants)||0,justVotedUsers:T.value,submitting:r.value,sessionStatus:(R=h.value)==null?void 0:R.status,canComplete:bt.value,finalPoint:K.value,completing:y.value,storyPoints:A,onSelectPoint:ft,onSubmitVote:mt,"onUpdate:finalPoint":S[0]||(S[0]=q=>K.value=q),onComplete:it},null,8,["storyCard","participants","myVote","selectedPoint","stats","distribution","revealed","votedCount","totalCount","justVotedUsers","submitting","sessionStatus","canComplete","finalPoint","completing"])):(u(),$("div",en,[((B=h.value)==null?void 0:B.status)==="COMPLETED"?(u(),U(o,{key:0,class:"complete-section"},{default:w(()=>[_(f,{icon:"success",title:"ä¼°ç‚¹å·²å®Œæˆ","sub-title":"è¯¥ä¼šè¯å·²æˆåŠŸå®Œæˆ"},{extra:w(()=>[_(t,{type:"primary",onClick:tt},{default:w(()=>[...S[5]||(S[5]=[L(" è¿”å›žéœ€æ±‚æ±  ",-1)])]),_:1})]),_:1})]),_:1})):D("",!0),((V=h.value)==null?void 0:V.status)==="CANCELLED"?(u(),U(o,{key:1,class:"complete-section"},{default:w(()=>[_(f,{icon:"warning",title:"ä¼°ç‚¹å·²å–æ¶ˆ","sub-title":"è¯¥ä¼šè¯å·²è¢«å–æ¶ˆ"},{extra:w(()=>[_(t,{type:"primary",onClick:tt},{default:w(()=>[...S[6]||(S[6]=[L(" è¿”å›žéœ€æ±‚æ±  ",-1)])]),_:1})]),_:1})]),_:1})):D("",!0)]))]}),_:1})])),[[b,c.value]])])}}},on=at(an,[["__scopeId","data-v-fbad74ae"]]);export{on as default};
