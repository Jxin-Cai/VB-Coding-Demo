<script setup lang="ts">
import { useFileStore } from '../stores/file'
import ChatInterface from '../components/ChatInterface.vue'

const fileStore = useFileStore()
</script>

<template>
  <div class="chat-view">
    <div class="chat-header">
      <h2>ğŸ’¬ æ™ºèƒ½å¯¹è¯</h2>
      <p class="subtitle">ä½¿ç”¨è‡ªç„¶è¯­è¨€æŸ¥è¯¢æ•°æ®åº“ï¼ŒAI è‡ªåŠ¨ç”Ÿæˆ SQL</p>
    </div>

    <!-- å½“å‰ DDL æ–‡ä»¶æç¤º -->
    <a-alert
      v-if="fileStore.currentFile"
      :message="`å½“å‰æ•°æ®åº“ï¼š${fileStore.currentFile.filename}ï¼ˆ${fileStore.currentFile.table_count} å¼ è¡¨ï¼‰`"
      type="success"
      show-icon
      class="current-context-alert"
    />
    <a-alert
      v-else
      message="è¯·å…ˆä¸Šä¼  DDL æ–‡ä»¶"
      description="åœ¨"æ–‡ä»¶ç®¡ç†"é¡µé¢ä¸Šä¼ æ•°æ®åº“ç»“æ„æ–‡ä»¶åï¼Œå³å¯å¼€å§‹å¯¹è¯"
      type="warning"
      show-icon
      class="current-context-alert"
    />

    <!-- å¯¹è¯ç•Œé¢ -->
    <ChatInterface />
  </div>
</template>

<style scoped>
.chat-view {
  max-width: 1200px;
  margin: 0 auto;
  padding: 24px;
}

.chat-header {
  margin-bottom: 16px;
}

.chat-header h2 {
  font-size: 24px;
  font-weight: 600;
  color: #1890ff;
  margin-bottom: 4px;
}

.subtitle {
  font-size: 14px;
  color: rgba(0, 0, 0, 0.45);
}

.current-context-alert {
  margin-bottom: 16px;
}
</style>
